<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PWA App</title>
    <meta name="theme-color" content="#2b2b2b">

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #2b2b2b;
            color: #ffffff;
            text-align: center;
            padding: 20px;
        }

        #app {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            background: #1f1f1f;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            background: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:hover {
            background: #0056b3;
        }
    </style>

    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(() => console.log('Service Worker Registered'))
                .catch(err => console.error('Service Worker Registration Failed:', err));
        }

        // Service Worker Script
        const serviceWorkerCode = `
            const CACHE_NAME = 'pwa-cache-v1';
            const urlsToCache = [
                '/',
                '/index.html',
                '/manifest.json'
            ];

            self.addEventListener('install', event => {
                event.waitUntil(
                    caches.open(CACHE_NAME).then(cache => {
                        return cache.addAll(urlsToCache);
                    })
                );
            });

            self.addEventListener('fetch', event => {
                event.respondWith(
                    caches.match(event.request).then(response => {
                        return response || fetch(event.request);
                    })
                );
            });
        `;

        // Dynamically create the Service Worker file
        const blob = new Blob([serviceWorkerCode], { type: 'text/javascript' });
        const serviceWorkerURL = URL.createObjectURL(blob);
        navigator.serviceWorker.register(serviceWorkerURL);
    </script>

    <script>
        // Dynamically create manifest.json
        const manifest = {
            name: "My PWA App",
            short_name: "PWA App",
            description: "A simple Progressive Web App example.",
            start_url: "./",
            display: "standalone",
            background_color: "#2b2b2b",
            theme_color: "#2b2b2b",
            icons: [
                {
                    src: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAQCAYAAACoXK69AAAAEElEQVR42mNk+M/wHwAF/wB/cmnI+oAAAAAASUVORK5CYII=",
                    sizes: "192x192",
                    type: "image/png"
                },
                {
                    src: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAFUlEQVR42mNk+M/wHwAF+wH/wV4R/+wAAAABJRU5ErkJggg==",
                    sizes: "512x512",
                    type: "image/png"
                }
            ]
        };

        const manifestBlob = new Blob([JSON.stringify(manifest)], { type: 'application/json' });
        const manifestURL = URL.createObjectURL(manifestBlob);
        const link = document.createElement('link');
        link.rel = 'manifest';
        link.href = manifestURL;
        document.head.appendChild(link);
    </script>
</head>
<body>
    <div id="app">
        <h1>Welcome to My PWA!</h1>
        <p>This is a simple app you can add to your Home Screen.</p>
        <button onclick="alert('Hello from the app!')">Click Me</button>
    </div>
</body>
</html>
